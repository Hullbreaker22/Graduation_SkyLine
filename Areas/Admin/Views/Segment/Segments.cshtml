@model List<FlightSegment>

@section Scripts {
    @if (@TempData["success-notification"] is not null)
    {
        <script>
            toastr.success('@TempData["success-notification"]')
        </script>
    }
    else if (@TempData["error-notification"] is not null)
    {
        <script>
            toastr.error('@TempData["error-notification"]')
        </script>
    }
}

<div class="container mt-4">
    <div class="d-flex justify-content-between mb-3">
        <h3 class="fw-bold">Flight Segments</h3>
        <a asp-controller="Segment" asp-action="CreateSegment" class="btn btn-primary">
            + Create New Segment
        </a>
    </div>

    <table class="table table-hover table-bordered shadow-sm">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Flight Code</th> 
                <th>Flight Number</th>
                <th>Order</th>
                <th>Cabin</th>
                <th>Departure Airport</th>
                <th>Arrival Airport</th>
                <th>Departure Time</th>
                <th>Arrival Time</th>
                <th>Distance (KM)</th>
                <th>Actions</th>
            </tr>
        </thead>

        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.Segment_ID_Pk</td>
                    <td>@item.Flight.Flight_Code</td> 
                    <td>@item.Flight_Number</td>
                    <td>@item.Segment_Order</td>
                    <td>@item.cabin</td>
                    <td>@item.DepartureAirport?.Name</td>
                    <td>@item.ArrivalAirport?.Name</td>
                    <td>@item.Departure_Time.ToString("yyyy-MM-dd HH:mm")</td>
                    <td>@item.Arrival_Time.ToString("yyyy-MM-dd HH:mm")</td>
                    <td>@item.Distance_KM</td>

                    <td class="text-center">
                        <a asp-controller="Segment"
                           asp-action="UpdateSegment"
                           asp-route-id="@item.Segment_ID_Pk"
                           class="btn btn-sm btn-warning">Edit</a>

                        <a asp-controller="Segment"
                           asp-action="Delete"
                           asp-route-id="@item.Segment_ID_Pk"
                           class="btn btn-sm btn-danger"
                           onclick="return confirm('Are you sure you want to delete this segment?')">
                            Delete
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
